"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[61],{11654:function(e,n,t){var s=t(72791),r=t(78983),i=t(80184);n.Z=function(e){var n=e.message,t=e.type;return(0,s.useEffect)((function(){window.scrollTo({top:0,behavior:"smooth"})}),[]),(0,i.jsxs)(r.Gc,{color:t,style:{textAlign:"center",height:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:[n," "]})}},63061:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var s=t(1413),r=t(29439),i=t(72791),o=t(78983),a=t(24846),c=t(63232),l=t(95161),d=t(57689),u=t(11654),p=t(93168),h=t(81694),m=t.n(h),f=t(70004),x=function(e,n){var t=(0,i.useRef)((function(){}));(0,i.useEffect)((function(){t.current=e}),[e]),(0,i.useEffect)((function(){if(n){var e=setInterval((function(){return t.current()}),n);return function(){return clearInterval(e)}}}),[n])},j=t(80184),v=function(e){var n=e.show,t=e.onHide,s=e.isError,a=e.handleSubmit,c=e.isLoading,l=e.setOTP,d=e.OTP,u=(0,i.useState)(300),h=(0,r.Z)(u,2),v=h[0],y=h[1],g=(0,i.useState)("5 min and 00 sec"),b=(0,r.Z)(g,2),w=b[0],S=b[1];return x((function(){n&&y(0===v?0:v-1);var e=Math.floor(v/60),t=v-60*e;S("".concat(e," : ").concat(t<10?"0"+t:t))}),1e3),0===v&&n&&t(),(0,j.jsx)(p.Z,{show:n,onHide:t,dialogClassName:"otp-modal",className:"general-otp-modal","aria-labelledby":"contained-modal-title-vcenter",children:(0,j.jsx)(p.Z.Body,{className:"otp-modal-body",children:(0,j.jsxs)("form",{action:"",onSubmit:a,children:[(0,j.jsx)("span",{className:"otp-title",children:"Verification code"}),(0,j.jsx)("span",{className:"span",children:"Enter the code that was sent to your phone number"}),(0,j.jsx)("div",{className:"otp-fake-field d-flex justify-content-between",children:(0,j.jsx)(f.Z,{onChange:function(e){l(e)},value:d,inputStyle:"otp-inputStyle",numInputs:6,separator:(0,j.jsx)("span",{}),style:{width:"100%"},hasErrored:!0})}),s?(0,j.jsx)("p",{className:m()(" text-center text-danger",{"d-block":!0}),children:" Invalid otp provided"}):(0,j.jsx)("p",{}),(0,j.jsx)("div",{className:"timer-container code-expire-ctn",children:(0,j.jsxs)("span",{className:"otp-text-with-link",style:{fontSize:"16px",color:"#838AA2",fontFamily:"sofia-medium"},children:["Code will expire in",(0,j.jsxs)("span",{style:{color:"#1F65B3"},children:[" "+w," Minutes"]})]})}),(0,j.jsx)(o.u5,{disabled:c||d.length<6,type:"submit",style:{width:"100%",backgroundColor:"#015EC6",outline:"none",padding:"15px 0px"},children:"Submit"})]})})})},y=t(62231),g=t(46756),b=function(){var e,n,t=(0,d.s0)(),p=(0,i.useState)(!1),h=(0,r.Z)(p,2),m=h[0],f=h[1],x=(0,y.hO)("nonce"),b=x.data,w=x.isLoadingNonce,S=x.refetch,Z=(0,y.YA)(),C=(0,r.Z)(Z,2),N=C[0],k=C[1],E=k.data,_=k.isLoading,I=k.isError,L=k.error,O=k.isSuccess,A=(0,y.vp)(),P=(0,r.Z)(A,2),T=P[0],B=P[1],H=B.data,q=B.isLoading,M=B.isError,R=B.isSuccess,Y=(0,i.useState)({username:"",password:""}),D=(0,r.Z)(Y,2),F=D[0],K=D[1],U=(0,i.useState)(!1),V=(0,r.Z)(U,2),X=V[0],z=V[1],G=(0,i.useState)(""),J=(0,r.Z)(G,2),Q=J[0],W=J[1];(0,i.useEffect)((function(){O&&z(!X),I&&S()}),[O,I]),(0,i.useEffect)((function(){var e;R&&(z(!1),t("/dashboard"),sessionStorage.setItem("token",null===(e=H.data[0])||void 0===e?void 0:e.token))}),[R]);return(0,j.jsx)("div",{className:"min-vh-100 d-flex flex-row align-items-center login-container",children:(0,j.jsxs)(o.KB,{children:[(0,j.jsx)(o.rb,{className:"justify-content-center",style:{marginBottom:"60px"},children:(0,j.jsxs)(o.b7,{md:5,children:[I&&(0,j.jsx)(u.Z,{message:null===(e=L.data)||void 0===e||null===(n=e.data[0])||void 0===n?void 0:n.uiMessage,type:"danger"}),(0,j.jsx)(o.dL,{children:(0,j.jsx)(o.xH,{className:"p-4",children:(0,j.jsx)(o.sl,{children:(0,j.jsxs)(o.lx,{onSubmit:function(e){e.preventDefault();var n=new g.X;n.setPublicKey(null===b||void 0===b?void 0:b.data[0].nonce);var t=n.encrypt(F.username),s=n.encrypt(F.password),r={req:"".concat(t,"::::").concat(s,"::::").concat(null===b||void 0===b?void 0:b.data[0].nonce)};N(r)},children:[(0,j.jsx)("h1",{style:{textAlign:"center"},children:"Compliance System"}),(0,j.jsx)("p",{className:"text-medium-emphasis",style:{textAlign:"center"},children:"Sign In to your account"}),(0,j.jsx)(o.YR,{className:"mb-3",children:(0,j.jsx)(o.jO,{placeholder:"Username",autoComplete:"username",onChange:function(e){return K((0,s.Z)((0,s.Z)({},F),{},{username:e.target.value}))},required:!0})}),(0,j.jsxs)(o.YR,{className:"mb-4",children:[(0,j.jsx)(o.jO,{type:m?"text":"password",placeholder:"Password",autoComplete:"current-password",onChange:function(e){return K((0,s.Z)((0,s.Z)({},F),{},{password:e.target.value}))},required:!0}),(0,j.jsx)(o.wV,{onClick:function(){return f(!m)},style:{cursor:"pointer"},children:(0,j.jsx)(a.Z,{icon:m?c.U:l.X})})]}),(0,j.jsx)("div",{style:{width:"100%"},children:(0,j.jsx)(o.u5,{disabled:w||_,type:"submit",style:{width:"100%",backgroundColor:"#015EC6",outline:"none"},children:"Login"})}),(0,j.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,j.jsx)("span",{style:{cursor:"pointer"},color:"link",className:"forgot-password-link"})})]})})})})]})}),(0,j.jsx)(v,{show:X,onHide:function(){return z(!1)},handleSubmit:function(e){var n;e.preventDefault(),T({otpId:null===E||void 0===E||null===(n=E.data[0])||void 0===n?void 0:n.otpId,otp:Q})},isError:M,isLoading:q,OTP:Q,setOTP:W})]})})}}}]);
//# sourceMappingURL=61.c948417f.chunk.js.map